<!DOCTYPE html>
<html lang="nl">
  <head>
    <!-- Global error suppression for external scripts -->
    <script>
      // Suppress all generic "Script error" messages from external scripts
      window.addEventListener('error', function(event) {
        if (event.message === 'Script error.' && !event.filename) {
          // This is a generic script error from external domain - suppress it
          event.preventDefault();
          return false;
        }
      });
    </script>
    
    <!-- Cookiebot Script - MUST BE ABSOLUTELY FIRST for GDPR compliance -->
    <script id="Cookiebot"
      src="https://consent.cookiebot.com/uc.js"
      data-cbid="277bd293-9336-4f15-ba87-4c760a56129b"
      data-blockingmode="auto"
      data-culture="nl"
      data-framework="custom"
      type="text/javascript"
      onerror="console.warn('Cookiebot script error suppressed');">
    </script>
    
    <!-- Cookiebot CSS Enhancement for Better Visibility -->
    <style>
      /* Ensure Cookiebot banner is always visible and properly positioned */
      #CybotCookiebotDialog,
      #CybotCookiebotDialogBodyUnderlay,
      #CybotCookiebotDialogBody,
      [id*="CybotCookiebot"] {
        z-index: 999999 !important;
        position: fixed !important;
      }
      
      /* Ensure no conflicts with site styles */
      #CybotCookiebotDialog {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        transform: none !important;
        background: rgba(0, 0, 0, 0.8) !important;
      }
      
      /* Banner content styling */
      #CybotCookiebotDialogBody {
        background: white !important;
        border: none !important;
        border-radius: 8px 8px 0 0 !important;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.25) !important;
        margin: 0 !important;
        padding: 20px !important;
        max-width: 100% !important;
        width: 100% !important;
      }
      
      /* Ensure buttons are visible */
      #CybotCookiebotDialogBody button,
      #CybotCookiebotDialogBody input[type="button"],
      #CybotCookiebotDialogBody input[type="submit"] {
        display: inline-block !important;
        visibility: visible !important;
        opacity: 1 !important;
        min-height: 40px !important;
        padding: 8px 16px !important;
        margin: 4px !important;
        border: 1px solid #ccc !important;
        border-radius: 4px !important;
        background: #f8f9fa !important;
        color: #333 !important;
        cursor: pointer !important;
        font-size: 14px !important;
        font-weight: 500 !important;
      }
      
      /* Accept button styling */
      #CybotCookiebotDialogBody button[id*="Accept"],
      #CybotCookiebotDialogBody input[id*="Accept"] {
        background: #28a745 !important;
        color: white !important;
        border-color: #28a745 !important;
      }
      
      /* Decline button styling */
      #CybotCookiebotDialogBody button[id*="Decline"],
      #CybotCookiebotDialogBody input[id*="Decline"] {
        background: #dc3545 !important;
        color: white !important;
        border-color: #dc3545 !important;
      }
      
      /* Settings button styling */
      #CybotCookiebotDialogBody button[id*="Settings"],
      #CybotCookiebotDialogBody input[id*="Settings"] {
        background: #6c757d !important;
        color: white !important;
        border-color: #6c757d !important;
      }
      
      /* Mobile responsive - Enhanced for all mobile devices */
      @media (max-width: 768px) {
        #CybotCookiebotDialog {
          background: rgba(0, 0, 0, 0.5) !important;
        }
        
        #CybotCookiebotDialogBody {
          padding: 16px !important;
          padding-bottom: calc(16px + env(safe-area-inset-bottom, 16px)) !important;
          margin: 0 8px !important;
          border-radius: 12px 12px 0 0 !important;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.25) !important;
        }
        
        #CybotCookiebotDialogBody h1,
        #CybotCookiebotDialogBody h2,
        #CybotCookiebotDialogBody h3 {
          font-size: 18px !important;
          line-height: 1.3 !important;
          margin-bottom: 12px !important;
          font-weight: 600 !important;
        }
        
        #CybotCookiebotDialogBody p,
        #CybotCookiebotDialogBody div:not([id*="Button"]) {
          font-size: 14px !important;
          line-height: 1.4 !important;
          margin-bottom: 16px !important;
        }
        
        #CybotCookiebotDialogBody button,
        #CybotCookiebotDialogBody input[type="button"],
        #CybotCookiebotDialogBody input[type="submit"] {
          width: 100% !important;
          margin: 4px 0 !important;
          min-height: 48px !important;
          padding: 12px 16px !important;
          font-size: 16px !important;
          font-weight: 600 !important;
          border-radius: 8px !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
        }
      }
      
      /* Small mobile devices */
      @media (max-width: 480px) {
        #CybotCookiebotDialogBody {
          margin: 0 4px !important;
          padding: 12px !important;
          border-radius: 8px 8px 0 0 !important;
        }
        
        #CybotCookiebotDialogBody h1,
        #CybotCookiebotDialogBody h2,
        #CybotCookiebotDialogBody h3 {
          font-size: 16px !important;
        }
        
        #CybotCookiebotDialogBody p {
          font-size: 13px !important;
        }
      }
    </style>
    
    <!-- Cookiebot Callbacks - MUST BE AFTER COOKIEBOT SCRIPT -->
    <script>
      // Function to force clear all cookies and show banner
      window.clearCookieConsent = function() {
        console.log('üç™ Forcing cookie consent reset...');
        
        // Clear all possible cookie names
        const cookieNames = ['CookieConsent', 'CookieConsentBulkSetting', 'CookieConsentBulkTicket'];
        const domain = window.location.hostname;
        
        cookieNames.forEach(name => {
          document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
          document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${domain};`;
          document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${domain};`;
        });
        
        // Clear localStorage
        localStorage.removeItem('cookie_consent');
        sessionStorage.removeItem('cookie_consent');
        
        // Force show Cookiebot banner
        if (window.Cookiebot && window.Cookiebot.renew) {
          window.Cookiebot.renew();
        }
        
        // Reload page to ensure clean state
        setTimeout(() => {
          window.location.reload();
        }, 1000);
      };
      
      // Auto-run on page load if no consent exists
      window.addEventListener('load', function() {
        setTimeout(() => {
          try {
            const hasConsent = document.cookie.includes('CookieConsent=');
            console.log('üç™ Checking consent on load:', hasConsent ? 'EXISTS' : 'MISSING');
            
            if (!hasConsent) {
              console.log('üç™ No consent found - forcing banner display');
              if (window.Cookiebot) {
                if (typeof window.Cookiebot.show === 'function') {
                  window.Cookiebot.show();
                } else if (typeof window.Cookiebot.renew === 'function') {
                  window.Cookiebot.renew();
                }
              }
            }
          } catch (error) {
            console.warn('üç™ Error during consent check:', error);
          }
        }, 2000);
      });
      
      // Set up Cookiebot callbacks immediately
      window.CookiebotCallback_OnLoad = function() {
        try {
          console.log('üç™ Cookiebot OnLoad callback fired');
          
          // Force show banner if no consent
          const hasConsent = document.cookie.includes('CookieConsent=');
          if (!hasConsent && window.Cookiebot && typeof window.Cookiebot.show === 'function') {
            console.log('üç™ Forcing banner show from OnLoad');
            window.Cookiebot.show();
          }
        } catch (error) {
          console.warn('üç™ Error in OnLoad callback:', error);
        }
      };
      
      window.CookiebotCallback_OnAccept = function() {
        try {
          console.log('üç™ Cookiebot OnAccept callback fired');
          // Reload analytics scripts with consent
          if (window.gtag && typeof window.gtag === 'function') {
            gtag('consent', 'update', {
              'analytics_storage': 'granted',
              'ad_storage': (window.Cookiebot && window.Cookiebot.consent && window.Cookiebot.consent.marketing) ? 'granted' : 'denied'
            });
          }
        } catch (error) {
          console.warn('üç™ Error in OnAccept callback:', error);
        }
      };
      
      window.CookiebotCallback_OnDecline = function() {
        try {
          console.log('üç™ Cookiebot OnDecline callback fired');
          // Ensure analytics are disabled
          if (window.gtag && typeof window.gtag === 'function') {
            gtag('consent', 'update', {
              'analytics_storage': 'denied',
              'ad_storage': 'denied'
            });
          }
        } catch (error) {
          console.warn('üç™ Error in OnDecline callback:', error);
        }
      };
      
      window.CookiebotCallback_OnDialogInit = function() {
        try {
          console.log('üç™ Cookiebot Dialog initialized');
        } catch (error) {
          console.warn('üç™ Error in OnDialogInit callback:', error);
        }
      };
      
      window.CookiebotCallback_OnDialogDisplay = function() {
        try {
          console.log('üç™ Cookiebot Dialog displayed');
        } catch (error) {
          console.warn('üç™ Error in OnDialogDisplay callback:', error);
        }
      };
    </script>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    
    <!-- GDPR-compliant meta for search engines - no cookies involved -->
    <meta name="robots" content="index, follow" />
    <meta name="language" content="nl-BE" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    

    
    <!-- Development tools - marked for Cookiebot (statistics category) -->
    <script type="text/plain" data-cookieconsent="statistics" src="https://replit.com/public/js/replit-dev-banner.js"></script>
    
    <!-- Simplified GDPR script handling -->
    <script>
      // Simple error prevention for external scripts
      window.addEventListener('error', function(event) {
        // Suppress external script errors that can't be controlled
        if (event.target && event.target.tagName === 'SCRIPT') {
          const src = event.target.src;
          if (src && (src.includes('cookiebot.com') || src.includes('replit.com'))) {
            // Log but don't let these errors bubble up
            console.warn('üîß External script issue handled:', src);
            event.preventDefault();
            return false;
          }
        }
      }, true);
      
      // Prevent unhandled promise rejections from external scripts
      window.addEventListener('unhandledrejection', function(event) {
        console.warn('üîß Unhandled promise rejection handled:', event.reason);
        event.preventDefault();
      });
    </script>
  </body>
</html>